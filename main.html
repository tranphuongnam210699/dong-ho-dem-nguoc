<!DOCTYPE html>
<html>
<head>
    <title>countdown</title>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="container">
        <h1>countdown</h1>
        <div>
            <input type="number" id="gio" min="0" class="input_time" onkeydown="javascript: return event.keyCode == 69 || event.keyCode == 189 ? false : true">
            <input type="number" id="phut" min="0" class="input_time" onkeydown="javascript: return event.keyCode == 69 || event.keyCode == 189 ? false : true">
            <input type="number" id="giay" min="0" class="input_time" onkeydown="javascript: return event.keyCode == 69 || event.keyCode == 189 ? false : true">
        </div>
        <div style="margin: 10px 0">
            <input type="button" value="START" class="btn_cd" onclick="start_cd()">
            <input type="button" value="STOP" class="btn_stop" onclick="stop_cd()">
            <input type="button" value="TT" class="btn_tt" onclick="tt_cd()">
        </div>
        <div class="div_show_time">   
            <span class="show_time" id="hour">00</span>
            <span class="show_time" id="minute">00</span>
            <span class="show_time" id="second">00</span>
        </div>
        <div class="div_show_text">
            <span class="show_text">Hour</span>
            <span class="show_text">Minute</span>
            <span class="show_text">Second</span>
        </div>
    </div>


    <script>
        var timeout;
        initialization();
        function start_cd() {

            $('input.btn_cd').prop("disabled", true);
            $("input.btn_cd").css('background', '#ccc');

            $('input.btn_stop').prop("disabled", false);
            $("input.btn_stop").css('background', '#ccc');
            $("input.btn_stop").css('background', 'linear-gradient(to bottom, #cedbe9 50%,#46adfc 50%)');
            $("input.btn_stop").css('background', '-moz-linear-gradient(top, #cedbe9 50%, #46adfc 50%)');
            $("input.btn_stop").css('background', '-webkit-linear-gradient(top, #cedbe9 50%,#46adfc 50%)');

            var h = document.getElementById('gio').value;
            var m = document.getElementById('phut').value;
            var s = document.getElementById('giay').value;

            timeout = setInterval(function(){
                if(h==0 && m==0 && s<0){
                    alert("Time Out!!!");
                    clearInterval(timeout);
                    $('input.btn_cd').prop('disabled', false);
                    $("input.btn_cd").css('background', 'linear-gradient(to bottom, #cedbe9 50%,#46adfc 50%)');
                    $("input.btn_cd").css('background', '-moz-linear-gradient(top, #cedbe9 50%, #46adfc 50%)');
                    $("input.btn_cd").css('background', '-webkit-linear-gradient(top, #cedbe9 50%,#46adfc 50%)');
                    $('input.btn_tt').prop("disabled", true);
                    $("input.btn_tt").css('background', '#ccc');
                }else{
                    if(s < 0){
                        m -= 1;
                        s = 59;
                    }
                    if(m < 0){
                        if(m === null){
                            m=0;
                        }
                        h -= 1;
                        m = 59;
                    }

                    if(h==null || h=="")
                        $('#hour').html("00");
                    else if(h<10)
                        $('#hour').html('0'+h);
                    if(m==null || m=="")
                        $('#minute').html("00");
                    else if(m<10)
                        $('#minute').html('0'+m);
                    if(s<10)
                        $('#second').html('0'+s);
                    else
                        $('#second').html(s);
                    s--;
                }
            }, 1000);
        }
        function stop_cd(){
            $('input.btn_stop').prop("disabled", true);
            $("input.btn_stop").css('background', '#ccc');

            $('input.btn_tt').prop("disabled", false);
            $("input.btn_tt").css('background', '#ccc');
            $("input.btn_tt").css('background', 'linear-gradient(to bottom, #cedbe9 50%,#46adfc 50%)');
            $("input.btn_tt").css('background', '-moz-linear-gradient(top, #cedbe9 50%, #46adfc 50%)');
            $("input.btn_tt").css('background', '-webkit-linear-gradient(top, #cedbe9 50%,#46adfc 50%)');
            clearInterval(timeout);

            alert(" da dung ");

        }
        function tt_cd(){
            //html() -> assign value
            //text() -> get value
            //val() -> get value of input
            //val(...) -> assign value to input
            //after() -> add value after blah blah
            var h= $('#hour').text();
            var m= $('#minute').text();
            var s= $('#second').text();

            var gio=s;
            var phut=m;
            var giay=s;

            
            timeout = setInterval(function(){
                if(h==0 && m==0 && s<0){
                    alert("Time Out!!!");
                    clearInterval(timeout);
                    $('input.btn_cd').prop('disabled', false);
                    $("input.btn_cd").css('background', 'linear-gradient(to bottom, #cedbe9 50%,#46adfc 50%)');
                    $("input.btn_cd").css('background', '-moz-linear-gradient(top, #cedbe9 50%, #46adfc 50%)');
                    $("input.btn_cd").css('background', '-webkit-linear-gradient(top, #cedbe9 50%,#46adfc 50%)');
                    $('input.btn_tt').prop("disabled", true);
                    $("input.btn_tt").css('background', '#ccc');
                }else{
                    if(s === -1){
                        m -= 1;
                        s = 59;
                    }
                    if(m === -1){
                        h -= 1;
                        m = 59;
                    }

    
                    $('#hour').html(h);
                    $('#minute').html(m);
                    $('#second').html(s);
                    s--;
                }
            }, 1000);

        }
        function initialization(){
            $('input.btn_tt').prop("disabled", true);
            $("input.btn_tt").css('background', '#ccc');

            $('input.btn_stop').prop("disabled", true);
            $("input.btn_stop").css('background', '#ccc');
        }
    </script>
</body>
</html>